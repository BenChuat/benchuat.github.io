{{ define "main" }}
  {{ .Scratch.Set "scope" "single" }}
  
  {{/* 加载 GitHub 样式主题 - 仅应用于文章内容区域 */}}
  {{ $githubStyle := resources.Get "style/github.css" }}
  {{ if $githubStyle }}
    {{ $githubStyleContent := $githubStyle.Content }}
    {{/* 将 #write 选择器替换为 .content-frosted-wrapper .prose */}}
    {{ $scopedContent := replace $githubStyleContent "#write" ".content-frosted-wrapper .prose" }}
    {{/* 移除 html 和 body 的全局样式，只保留内容相关样式 */}}
    {{ $scopedContent = replace $scopedContent "html {" "/* html styles removed for scoping */" }}
    {{ $scopedContent = replace $scopedContent "body {" "/* body styles removed for scoping */" }}
    <style>
    /* GitHub 样式主题 - 作用域限制在文章内容区域 */
    {{ $scopedContent | safeCSS }}
    </style>
  {{ end }}
  
  <style>
  /* Additional page-specific styles - global styles are in global-background.html */
  
  /* 确保目录导航不受 GitHub 样式影响 */
  .content-frosted-wrapper .toc,
  .content-frosted-wrapper .toc * {
    /* 保持原有样式，不受 GitHub 主题影响 */
  }
  
  /* 确保底部毛玻璃效果不受 GitHub 样式影响 */
  .content-frosted-wrapper > article > footer,
  .content-frosted-wrapper > article > footer * {
    /* 保持原有样式 */
  }
  .content-frosted-wrapper > article {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }
  
  .content-frosted-wrapper > article > section {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  
  @media (min-width: 1024px) {
    .content-frosted-wrapper > article > section {
      flex-direction: row;
    }
  }

  /* Beautify article metadata section - Clean and modern style */
  /* Override global background rules with highest priority */
  html body main#main-content .content-frosted-wrapper #single_header > div:first-of-type,
  html body main#main-content .content-frosted-wrapper #single_header > div:first-of-type * {
    background: initial !important;
    background-color: initial !important;
    background-image: initial !important;
    border: initial !important;
    border-radius: initial !important;
    box-shadow: initial !important;
  }

  #single_header > div:first-of-type {
    margin-top: 1.5rem !important;
    margin-bottom: 1.5rem !important;
    padding: 0 !important;
    background: transparent !important;
    border: none !important;
  }

  /* Keep metadata in horizontal layout */
  #single_header > div:first-of-type .flex {
    gap: 0.5rem !important;
    align-items: center !important;
    flex-wrap: wrap !important;
    flex-direction: row !important;
    display: flex !important;
  }

  /* Beautify metadata items - clean horizontal style */
  #single_header > div:first-of-type .flex.flex-row {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: wrap !important;
    align-items: center !important;
    gap: 0 !important;
  }

  #single_header > div:first-of-type time,
  #single_header > div:first-of-type span:not(.px-2) {
    color: #6b7280 !important;
    font-size: 0.875rem !important;
    font-weight: normal !important;
    transition: color 0.2s ease !important;
    display: inline !important;
  }

  .dark #single_header > div:first-of-type time,
  .dark #single_header > div:first-of-type span:not(.px-2) {
    color: #9ca3af !important;
  }

  #single_header > div:first-of-type time:hover,
  #single_header > div:first-of-type span:not(.px-2):hover {
    color: #3b82f6 !important;
  }

  .dark #single_header > div:first-of-type time:hover,
  .dark #single_header > div:first-of-type span:not(.px-2):hover {
    color: #60a5fa !important;
  }

  /* Separator dots - subtle gray */
  #single_header > div:first-of-type .px-2 {
    color: #9ca3af !important;
    font-size: 0.75rem !important;
    font-weight: normal !important;
    margin: 0 0.25rem !important;
    display: inline !important;
  }

  .dark #single_header > div:first-of-type .px-2 {
    color: #6b7280 !important;
  }

  /* Beautify taxonomy badges - Pill style with border */
  /* Override global background rules with highest priority */
  html body main#main-content .content-frosted-wrapper #single_header .flex.flex-row.flex-wrap.items-center a.relative,
  html body main#main-content .content-frosted-wrapper #single_header .flex.flex-row.flex-wrap.items-center a.relative *,
  html body main#main-content .content-frosted-wrapper #single_header .flex.flex-row.flex-wrap.items-center a.relative span {
    background: initial !important;
    background-color: initial !important;
    background-image: initial !important;
    border: initial !important;
    border-radius: initial !important;
    box-shadow: initial !important;
  }

  /* Beautify category/tag badges - pill style with border and shadow */
  #single_header .flex.flex-row.flex-wrap.items-center a.relative {
    background: rgba(255, 255, 255, 0.8) !important;
    background-color: rgba(255, 255, 255, 0.8) !important;
    color: #3b82f6 !important;
    padding: 0.5rem 1rem !important;
    border-radius: 9999px !important;
    font-weight: 500 !important;
    font-size: 0.875rem !important;
    transition: all 0.2s ease !important;
    border: 1.5px solid #3b82f6 !important;
    border-width: 1.5px !important;
    border-style: solid !important;
    border-color: #3b82f6 !important;
    text-decoration: none !important;
    margin-top: 0.75rem !important;
    margin-right: 0.5rem !important;
    display: inline-block !important;
    box-shadow: 0 1px 3px rgba(59, 130, 246, 0.2) !important;
  }

  .dark #single_header .flex.flex-row.flex-wrap.items-center a.relative {
    background: rgba(30, 41, 59, 0.8) !important;
    background-color: rgba(30, 41, 59, 0.8) !important;
    color: #60a5fa !important;
    border-color: #60a5fa !important;
    box-shadow: 0 1px 3px rgba(59, 130, 246, 0.3) !important;
  }

  #single_header .flex.flex-row.flex-wrap.items-center a.relative:hover {
    background: rgba(255, 255, 255, 0.95) !important;
    background-color: rgba(255, 255, 255, 0.95) !important;
    color: #2563eb !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3) !important;
  }

  .dark #single_header .flex.flex-row.flex-wrap.items-center a.relative:hover {
    background: rgba(30, 41, 59, 0.95) !important;
    background-color: rgba(30, 41, 59, 0.95) !important;
    color: #93c5fd !important;
    box-shadow: 0 4px 8px rgba(59, 130, 246, 0.4) !important;
  }

  #single_header .flex.flex-row.flex-wrap.items-center a.relative span {
    border: none !important;
    background: transparent !important;
    padding: 0 !important;
    color: inherit !important;
  }

  /* Beautify author section - Clean card style */
  /* Override global background rules with highest priority */
  html body main#main-content .content-frosted-wrapper #single_header .author,
  html body main#main-content .content-frosted-wrapper #single_header .author *,
  html body main#main-content .content-frosted-wrapper #single_header .author img {
    background: initial !important;
    background-color: initial !important;
    background-image: initial !important;
    border: initial !important;
    border-radius: initial !important;
    box-shadow: initial !important;
  }

  #single_header .author {
    background: rgba(255, 255, 255, 0.5) !important;
    background-color: rgba(255, 255, 255, 0.5) !important;
    border-radius: 12px !important;
    padding: 1.25rem !important;
    margin-top: 2rem !important;
    border: 1px solid rgba(229, 231, 235, 0.5) !important;
    border-width: 1px !important;
    border-style: solid !important;
    border-color: rgba(229, 231, 235, 0.5) !important;
    transition: all 0.2s ease !important;
    display: flex !important;
  }

  .dark #single_header .author {
    background: rgba(30, 41, 59, 0.5);
    border: 1px solid rgba(59, 130, 246, 0.2);
  }

  #single_header .author:hover {
    border-color: rgba(59, 130, 246, 0.4);
  }

  .dark #single_header .author:hover {
    border-color: rgba(59, 130, 246, 0.5);
  }

  #single_header .author img {
    border: 2px solid rgba(59, 130, 246, 0.2) !important;
    border-width: 2px !important;
    border-style: solid !important;
    border-color: rgba(59, 130, 246, 0.2) !important;
    transition: all 0.2s ease !important;
  }

  .dark #single_header .author img {
    border-color: rgba(59, 130, 246, 0.3);
  }

  #single_header .author:hover img {
    border-color: rgba(59, 130, 246, 0.4);
  }

  .dark #single_header .author:hover img {
    border-color: rgba(59, 130, 246, 0.5);
  }

  #single_header .author .place-self-center {
    flex: 1;
  }

  #single_header .author .text-\[0\.6rem\] {
    letter-spacing: 0.05em;
    font-weight: 600;
    margin-bottom: 0.375rem;
    color: #6b7280;
    text-transform: uppercase;
  }

  .dark #single_header .author .text-\[0\.6rem\] {
    color: #9ca3af;
  }

  #single_header .author .font-semibold {
    font-size: 1.125rem;
    margin-bottom: 0.25rem;
    color: #1f2937;
    font-weight: 600;
  }

  .dark #single_header .author .font-semibold {
    color: #f3f4f6;
  }

  #single_header .author .text-sm {
    line-height: 1.5;
    margin-bottom: 0.75rem;
    color: #6b7280;
  }

  .dark #single_header .author .text-sm {
    color: #9ca3af;
  }

  #single_header .author .text-2xl a,
  #single_header .author .text-lg a {
    color: #6b7280 !important;
    transition: color 0.2s ease, opacity 0.2s ease !important;
    display: inline-block !important;
    opacity: 0.7 !important;
  }

  .dark #single_header .author .text-2xl a,
  .dark #single_header .author .text-lg a {
    color: #9ca3af;
  }

  #single_header .author .text-2xl a:hover,
  #single_header .author .text-lg a:hover {
    opacity: 1 !important;
    color: #3b82f6 !important;
  }

  .dark #single_header .author .text-2xl a:hover,
  .dark #single_header .author .text-lg a:hover {
    color: #60a5fa !important;
  }

  /* 1. 增大整体字号 */
  .content-frosted-wrapper .prose {
    font-size: 1.125rem !important;
    line-height: 1.8 !important;
    max-width: 100% !important;
    width: 100% !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  .content-frosted-wrapper .prose p {
    font-size: 1.125rem !important;
    line-height: 1.8 !important;
  }

  .content-frosted-wrapper .prose h1 {
    font-size: 2.5rem !important;
    line-height: 1.3 !important;
  }

  .content-frosted-wrapper .prose h2 {
    font-size: 2rem !important;
    line-height: 1.4 !important;
  }

  .content-frosted-wrapper .prose h3 {
    font-size: 1.75rem !important;
    line-height: 1.4 !important;
  }

  .content-frosted-wrapper .prose h4 {
    font-size: 1.5rem !important;
    line-height: 1.5 !important;
  }

  .content-frosted-wrapper .prose li {
    font-size: 1.125rem !important;
    line-height: 1.8 !important;
  }

  /* 3. 优化表格显示 - 毛玻璃风格，与整体协调 */
  /* 为包含表格的容器添加横向滚动，防止表格超出容器 */
  html body main#main-content .content-frosted-wrapper .prose:has(table),
  html body main#main-content .content-frosted-wrapper .article-content:has(table) {
    overflow-x: auto !important;
    overflow-y: visible !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* 使用最高优先级选择器覆盖所有全局规则 */
  html body main#main-content .content-frosted-wrapper .prose table,
  html body main#main-content .content-frosted-wrapper .article-content table,
  html body main#main-content .content-frosted-wrapper .article-content .prose table,
  html body main#main-content .content-frosted-wrapper article .prose table,
  html body main#main-content .content-frosted-wrapper article .article-content table {
    display: table !important;
    width: 100% !important;
    max-width: 100% !important;
    min-width: min-content !important;
    border-collapse: collapse !important;
    margin: 1.5rem 0 !important;
    table-layout: auto !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    font-size: 1.125rem !important;
    border: 1px solid rgba(255, 255, 255, 0.4) !important;
    border-radius: 12px !important;
    overflow: hidden !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
    background: rgba(255, 255, 255, 0.5) !important;
    background-color: rgba(255, 255, 255, 0.5) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    box-sizing: border-box !important;
    table-layout: auto !important;
  }

  .dark html body main#main-content .content-frosted-wrapper .prose table,
  .dark html body main#main-content .content-frosted-wrapper .article-content table,
  .dark html body main#main-content .content-frosted-wrapper .article-content .prose table,
  .dark html body main#main-content .content-frosted-wrapper article .prose table,
  .dark html body main#main-content .content-frosted-wrapper article .article-content table {
    border-color: rgba(255, 255, 255, 0.08) !important;
    background: rgba(22, 22, 22, 0.7) !important;
    background-color: rgba(22, 22, 22, 0.7) !important;
  }

  html body main#main-content .content-frosted-wrapper .prose thead,
  html body main#main-content .content-frosted-wrapper .article-content thead,
  html body main#main-content .content-frosted-wrapper .article-content .prose thead,
  html body main#main-content .content-frosted-wrapper article .prose thead,
  html body main#main-content .content-frosted-wrapper article .article-content thead {
    background: rgba(255, 255, 255, 0.7) !important;
    background-color: rgba(255, 255, 255, 0.7) !important;
    display: table-header-group !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
  }

  .dark html body main#main-content .content-frosted-wrapper .prose thead,
  .dark html body main#main-content .content-frosted-wrapper .article-content thead,
  .dark html body main#main-content .content-frosted-wrapper .article-content .prose thead,
  .dark html body main#main-content .content-frosted-wrapper article .prose thead,
  .dark html body main#main-content .content-frosted-wrapper article .article-content thead {
    background: rgba(40, 40, 40, 0.9) !important;
    background-color: rgba(40, 40, 40, 0.9) !important;
  }

  html body main#main-content .content-frosted-wrapper .prose thead th,
  html body main#main-content .content-frosted-wrapper .article-content thead th,
  html body main#main-content .content-frosted-wrapper .article-content .prose thead th,
  html body main#main-content .content-frosted-wrapper article .prose thead th,
  html body main#main-content .content-frosted-wrapper article .article-content thead th {
    padding: 0.875rem 1rem !important;
    text-align: left !important;
    font-weight: 600 !important;
    color: #1a1a1a !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
    border-right: 1px solid rgba(0, 0, 0, 0.08) !important;
    font-size: 1.125rem !important;
    background: rgba(255, 255, 255, 0.7) !important;
    background-color: rgba(255, 255, 255, 0.7) !important;
  }

  .dark html body main#main-content .content-frosted-wrapper .prose thead th,
  .dark html body main#main-content .content-frosted-wrapper .article-content thead th,
  .dark html body main#main-content .content-frosted-wrapper .article-content .prose thead th,
  .dark html body main#main-content .content-frosted-wrapper article .prose thead th,
  .dark html body main#main-content .content-frosted-wrapper article .article-content thead th {
    color: #ffffff !important;
    border-bottom-color: rgba(255, 255, 255, 0.1) !important;
    border-right-color: rgba(255, 255, 255, 0.08) !important;
    background: rgba(40, 40, 40, 0.9) !important;
    background-color: rgba(40, 40, 40, 0.9) !important;
  }

  html body main#main-content .content-frosted-wrapper .prose tbody tr,
  html body main#main-content .content-frosted-wrapper .article-content tbody tr,
  html body main#main-content .content-frosted-wrapper .article-content .prose tbody tr,
  html body main#main-content .content-frosted-wrapper article .prose tbody tr,
  html body main#main-content .content-frosted-wrapper article .article-content tbody tr {
    border-bottom: 1px solid rgba(0, 0, 0, 0.08) !important;
    transition: background-color 0.2s ease !important;
  }

  .dark html body main#main-content .content-frosted-wrapper .prose tbody tr,
  .dark html body main#main-content .content-frosted-wrapper .article-content tbody tr,
  .dark html body main#main-content .content-frosted-wrapper .article-content .prose tbody tr,
  .dark html body main#main-content .content-frosted-wrapper article .prose tbody tr,
  .dark html body main#main-content .content-frosted-wrapper article .article-content tbody tr {
    border-bottom-color: rgba(255, 255, 255, 0.08) !important;
  }

  html body main#main-content .content-frosted-wrapper .prose tbody tr:nth-child(even),
  html body main#main-content .content-frosted-wrapper .article-content tbody tr:nth-child(even),
  html body main#main-content .content-frosted-wrapper .article-content .prose tbody tr:nth-child(even),
  html body main#main-content .content-frosted-wrapper article .prose tbody tr:nth-child(even),
  html body main#main-content .content-frosted-wrapper article .article-content tbody tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.3) !important;
    background-color: rgba(255, 255, 255, 0.3) !important;
  }

  .dark html body main#main-content .content-frosted-wrapper .prose tbody tr:nth-child(even),
  .dark html body main#main-content .content-frosted-wrapper .article-content tbody tr:nth-child(even),
  .dark html body main#main-content .content-frosted-wrapper .article-content .prose tbody tr:nth-child(even),
  .dark html body main#main-content .content-frosted-wrapper article .prose tbody tr:nth-child(even),
  .dark html body main#main-content .content-frosted-wrapper article .article-content tbody tr:nth-child(even) {
    background: rgba(35, 35, 35, 0.7) !important;
    background-color: rgba(35, 35, 35, 0.7) !important;
  }

  html body main#main-content .content-frosted-wrapper .prose tbody tr:nth-child(odd),
  html body main#main-content .content-frosted-wrapper .article-content tbody tr:nth-child(odd),
  html body main#main-content .content-frosted-wrapper .article-content .prose tbody tr:nth-child(odd),
  html body main#main-content .content-frosted-wrapper article .prose tbody tr:nth-child(odd),
  html body main#main-content .content-frosted-wrapper article .article-content tbody tr:nth-child(odd) {
    background: rgba(255, 255, 255, 0.2) !important;
    background-color: rgba(255, 255, 255, 0.2) !important;
  }

  .dark html body main#main-content .content-frosted-wrapper .prose tbody tr:nth-child(odd),
  .dark html body main#main-content .content-frosted-wrapper .article-content tbody tr:nth-child(odd),
  .dark html body main#main-content .content-frosted-wrapper .article-content .prose tbody tr:nth-child(odd),
  .dark html body main#main-content .content-frosted-wrapper article .prose tbody tr:nth-child(odd),
  .dark html body main#main-content .content-frosted-wrapper article .article-content tbody tr:nth-child(odd) {
    background: rgba(30, 30, 30, 0.7) !important;
    background-color: rgba(30, 30, 30, 0.7) !important;
  }

  /* 移除表格行 hover 效果 */
  html body main#main-content .content-frosted-wrapper .prose tbody tr:hover,
  html body main#main-content .content-frosted-wrapper .article-content .prose tbody tr:hover,
  html body main#main-content .content-frosted-wrapper article .prose tbody tr:hover,
  .dark html body main#main-content .content-frosted-wrapper .prose tbody tr:hover,
  .dark html body main#main-content .content-frosted-wrapper .article-content .prose tbody tr:hover,
  .dark html body main#main-content .content-frosted-wrapper article .prose tbody tr:hover {
    background: inherit !important;
    background-color: inherit !important;
  }

  html body main#main-content .content-frosted-wrapper .prose tbody td,
  html body main#main-content .content-frosted-wrapper .article-content .prose tbody td,
  html body main#main-content .content-frosted-wrapper article .prose tbody td {
    padding: 0.875rem 1rem !important;
    border-right: 1px solid rgba(0, 0, 0, 0.08) !important;
    font-size: 1.125rem !important;
    line-height: 1.6 !important;
    color: inherit !important;
  }

  .dark html body main#main-content .content-frosted-wrapper .prose tbody td,
  .dark html body main#main-content .content-frosted-wrapper .article-content tbody td,
  .dark html body main#main-content .content-frosted-wrapper .article-content .prose tbody td,
  .dark html body main#main-content .content-frosted-wrapper article .prose tbody td,
  .dark html body main#main-content .content-frosted-wrapper article .article-content tbody td {
    border-right-color: rgba(255, 255, 255, 0.08) !important;
    color: #ffffff !important;
  }

  html body main#main-content .content-frosted-wrapper .prose thead th:last-child,
  html body main#main-content .content-frosted-wrapper .article-content .prose thead th:last-child,
  html body main#main-content .content-frosted-wrapper article .prose thead th:last-child,
  html body main#main-content .content-frosted-wrapper .prose tbody td:last-child,
  html body main#main-content .content-frosted-wrapper .article-content .prose tbody td:last-child,
  html body main#main-content .content-frosted-wrapper article .prose tbody td:last-child {
    border-right: none !important;
    border-right-width: 0 !important;
    border-right-style: none !important;
    padding-right: 1rem !important;
  }

  /* 4. 代码块语法高亮样式 - GitHub 风格 */
  /* 确保代码块有正确的背景和文字颜色 */
  .content-frosted-wrapper .prose .chroma,
  .content-frosted-wrapper .prose .highlight,
  .content-frosted-wrapper .prose pre {
    background: #f6f8fa !important;
    background-color: #f6f8fa !important;
    color: #24292e !important;
    max-width: 100% !important;
    width: 100% !important;
    box-sizing: border-box !important;
    overflow-x: auto !important;
    overflow-y: visible !important;
    border-radius: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* 移除代码块外层容器的背景色和边框 */
  .content-frosted-wrapper .prose .chroma,
  .content-frosted-wrapper .prose .highlight {
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  
  /* 确保代码块内部的 pre 元素 - 透明背景与页面融合 */
  .content-frosted-wrapper .prose .chroma pre,
  .content-frosted-wrapper .prose .highlight pre,
  .content-frosted-wrapper .prose pre {
    background: transparent !important;
    background-color: transparent !important;
    border-radius: 0 !important;
    padding: 1rem 1.2rem !important;
    margin: 0 !important;
    font-size: 16px !important;
    line-height: 1.7 !important;
  }
  
  /* 代码块容器响应式 */
  .content-frosted-wrapper .prose .chroma,
  .content-frosted-wrapper .prose .highlight {
    max-width: 100% !important;
    width: 100% !important;
    box-sizing: border-box !important;
    overflow-x: auto !important;
    overflow-y: visible !important;
    word-wrap: break-word !important;
    word-break: break-all !important;
  }
  
  /* 代码块内部表格容器 - 透明背景，固定布局 */
  .content-frosted-wrapper .prose .chroma .lntable,
  .content-frosted-wrapper .prose .highlight .lntable {
    display: table !important;
    width: 100% !important;
    max-width: 100% !important;
    table-layout: fixed !important;
    box-sizing: border-box !important;
    overflow-x: auto !important;
    overflow-y: visible !important;
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
  }
  
  /* 行号列的表格行 - 确保行号正确显示 */
  .content-frosted-wrapper .prose .chroma .lntable tr,
  .content-frosted-wrapper .prose .highlight .lntable tr {
    display: table-row !important;
  }
  
  /* 行号列 - 固定宽度 3em，透明背景与页面融合 */
  .content-frosted-wrapper .prose .chroma .lntd:first-child,
  .content-frosted-wrapper .prose .highlight .lntd:first-child {
    width: 3em !important;
    min-width: 3em !important;
    max-width: 3em !important;
    padding: 0 !important;
    text-align: right !important;
    user-select: none !important;
    vertical-align: top !important;
    box-sizing: border-box !important;
    overflow: visible !important;
    overflow-x: visible !important;
    overflow-y: visible !important;
    background: transparent !important;
    background-color: transparent !important;
    border-right: none !important;
  }
  
  /* 行号列的 pre 元素 - 与代码列 padding 一致 */
  .content-frosted-wrapper .prose .chroma .lntd:first-child pre,
  .content-frosted-wrapper .prose .highlight .lntd:first-child pre {
    margin: 0 !important;
    padding: 1rem 0.5rem 1rem 0.5rem !important;
    overflow: visible !important;
    overflow-x: visible !important;
    overflow-y: visible !important;
    background: transparent !important;
    border: none !important;
    line-height: 1.7 !important;
  }
  
  /* 行号数字本身 - 右对齐，颜色 */
  .content-frosted-wrapper .prose .chroma .lntd:first-child .lnt,
  .content-frosted-wrapper .prose .chroma .lntd:first-child .ln,
  .content-frosted-wrapper .prose .highlight .lntd:first-child .lnt,
  .content-frosted-wrapper .prose .highlight .lntd:first-child .ln {
    display: block !important;
    padding: 0 !important;
    margin: 0 !important;
    text-align: right !important;
    line-height: 1.7 !important;
    white-space: nowrap !important;
    overflow: visible !important;
    color: #9ca3af !important;
  }
  
  .dark .content-frosted-wrapper .prose .chroma .lntd:first-child .lnt,
  .dark .content-frosted-wrapper .prose .chroma .lntd:first-child .ln,
  .dark .content-frosted-wrapper .prose .highlight .lntd:first-child .lnt,
  .dark .content-frosted-wrapper .prose .highlight .lntd:first-child .ln {
    color: #6b7280 !important;
  }
  
  /* 行号列的 code 元素 - 无滚动条 */
  .content-frosted-wrapper .prose .chroma .lntd:first-child code,
  .content-frosted-wrapper .prose .highlight .lntd:first-child code {
    margin: 0 !important;
    padding: 0 !important;
    overflow: visible !important;
    overflow-x: visible !important;
    overflow-y: visible !important;
    background: transparent !important;
    border: none !important;
    line-height: 1.7 !important;
  }
  
  /* 代码块内部的 tr 元素 - 透明背景 */
  .content-frosted-wrapper .prose .chroma tr,
  .content-frosted-wrapper .prose .highlight tr {
    background: transparent !important;
    background-color: transparent !important;
  }
  
  /* 代码列 - 允许横向滚动 */
  .content-frosted-wrapper .prose .chroma .lntd:last-child,
  .content-frosted-wrapper .prose .highlight .lntd:last-child {
    width: auto !important;
    min-width: 0 !important;
    max-width: 100% !important;
    overflow-x: auto !important;
    overflow-y: visible !important;
    box-sizing: border-box !important;
    padding: 0 !important;
  }
  
  /* 代码内容 - 横向滚动，与行号列的 padding 一致，参考 Prism.js 样式，隐藏滚动条 */
  .content-frosted-wrapper .prose .chroma .lntd:last-child pre,
  .content-frosted-wrapper .prose .highlight .lntd:last-child pre {
    max-width: 100% !important;
    overflow-x: auto !important;
    overflow-y: visible !important;
    box-sizing: border-box !important;
    word-wrap: normal !important;
    white-space: pre !important;
    margin: 0 !important;
    padding: 1rem 1.2rem 1rem 0.5rem !important;
    line-height: 1.7 !important;
    scrollbar-width: none !important; /* Firefox */
    -ms-overflow-style: none !important; /* IE and Edge */
  }
  
  /* 隐藏代码块的横向滚动条（Webkit浏览器） */
  .content-frosted-wrapper .prose .chroma .lntd:last-child pre::-webkit-scrollbar,
  .content-frosted-wrapper .prose .highlight .lntd:last-child pre::-webkit-scrollbar,
  .content-frosted-wrapper .prose .chroma pre::-webkit-scrollbar,
  .content-frosted-wrapper .prose .highlight pre::-webkit-scrollbar,
  .content-frosted-wrapper .prose pre::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
  }
  
  /* 隐藏代码块容器的横向滚动条 */
  .content-frosted-wrapper .prose .chroma,
  .content-frosted-wrapper .prose .highlight {
    scrollbar-width: none !important; /* Firefox */
    -ms-overflow-style: none !important; /* IE and Edge */
  }
  
  .content-frosted-wrapper .prose .chroma::-webkit-scrollbar,
  .content-frosted-wrapper .prose .highlight::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
  }
  
  /* 独立的 pre 元素（无行号时）- 隐藏滚动条 */
  .content-frosted-wrapper .prose .chroma pre,
  .content-frosted-wrapper .prose .highlight pre,
  .content-frosted-wrapper .prose pre {
    max-width: 100% !important;
    overflow-x: auto !important;
    overflow-y: visible !important;
    box-sizing: border-box !important;
    word-wrap: normal !important;
    white-space: pre !important;
    line-height: 1.7 !important;
    scrollbar-width: none !important; /* Firefox */
    -ms-overflow-style: none !important; /* IE and Edge */
  }
  
  /* 修复复制按钮样式 - 确保暗色模式和亮色模式一致，不是一长条 */
  .content-frosted-wrapper .prose .highlight .copy-button,
  .content-frosted-wrapper .prose .chroma .copy-button {
    width: auto !important;
    min-width: 5rem !important;
    max-width: 5rem !important;
    padding: 0.25rem 0.75rem !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    border-radius: 0.375rem 0 0 0.375rem !important;
  }
  
  .dark .content-frosted-wrapper .prose .highlight .copy-button,
  .dark .content-frosted-wrapper .prose .chroma .copy-button {
    width: auto !important;
    min-width: 5rem !important;
    max-width: 5rem !important;
    padding: 0.25rem 0.75rem !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
  
  /* 代码内容 - 防止换行 */
  .content-frosted-wrapper .prose .chroma code,
  .content-frosted-wrapper .prose .highlight code,
  .content-frosted-wrapper .prose pre code {
    white-space: pre !important;
    word-wrap: normal !important;
    word-break: normal !important;
    overflow-wrap: normal !important;
  }

  /* 暗色模式：移除外层容器背景 */
  .dark .content-frosted-wrapper .prose .chroma,
  .dark .content-frosted-wrapper .prose .highlight {
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  
  /* 暗色模式：确保代码块内部的 pre 元素有背景色 */
  .dark .content-frosted-wrapper .prose .chroma pre,
  .dark .content-frosted-wrapper .prose .highlight pre,
  .dark .content-frosted-wrapper .prose pre,
  .dark .content-frosted-wrapper .prose .chroma *,
  .dark .content-frosted-wrapper .prose .highlight *,
  .dark .content-frosted-wrapper .prose pre * {
    background: #000000 !important;
    background-color: #000000 !important;
    color: #d4d4d4 !important;
    max-width: 100% !important;
    width: 100% !important;
    box-sizing: border-box !important;
    overflow-x: auto !important;
    overflow-y: visible !important;
  }
  
  /* 暗色模式：确保 pre 元素有圆角和内边距 */
  .dark .content-frosted-wrapper .prose .chroma pre,
  .dark .content-frosted-wrapper .prose .highlight pre,
  .dark .content-frosted-wrapper .prose pre {
    border-radius: 6px !important;
    padding: 1rem !important;
    margin: 1.5rem 0 !important;
  }

  /* 关键字 - 蓝色 */
  .content-frosted-wrapper .prose .chroma .k,
  .content-frosted-wrapper .prose .chroma .kd,
  .content-frosted-wrapper .prose .chroma .kn,
  .content-frosted-wrapper .prose .chroma .kp,
  .content-frosted-wrapper .prose .chroma .kr,
  .content-frosted-wrapper .prose .chroma .kt {
    color: #005cc5 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .k,
  .dark .content-frosted-wrapper .prose .chroma .kd,
  .dark .content-frosted-wrapper .prose .chroma .kn,
  .dark .content-frosted-wrapper .prose .chroma .kp,
  .dark .content-frosted-wrapper .prose .chroma .kr,
  .dark .content-frosted-wrapper .prose .chroma .kt {
    color: #4fc3f7 !important;
  }

  /* 关键字常量 - 深蓝色 */
  .content-frosted-wrapper .prose .chroma .kc {
    color: #005cc5 !important;
    font-weight: 600 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .kc {
    color: #4fc3f7 !important;
    font-weight: 600 !important;
  }

  /* 字符串 - 绿色/橙色 */
  .content-frosted-wrapper .prose .chroma .s,
  .content-frosted-wrapper .prose .chroma .s1,
  .content-frosted-wrapper .prose .chroma .s2,
  .content-frosted-wrapper .prose .chroma .sb,
  .content-frosted-wrapper .prose .chroma .sc,
  .content-frosted-wrapper .prose .chroma .sd,
  .content-frosted-wrapper .prose .chroma .sh,
  .content-frosted-wrapper .prose .chroma .si,
  .content-frosted-wrapper .prose .chroma .sx,
  .content-frosted-wrapper .prose .chroma .sr,
  .content-frosted-wrapper .prose .chroma .ss,
  .content-frosted-wrapper .prose .chroma .sa,
  .content-frosted-wrapper .prose .chroma .dl {
    color: #032f62 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .s,
  .dark .content-frosted-wrapper .prose .chroma .s1,
  .dark .content-frosted-wrapper .prose .chroma .s2,
  .dark .content-frosted-wrapper .prose .chroma .sb,
  .dark .content-frosted-wrapper .prose .chroma .sc,
  .dark .content-frosted-wrapper .prose .chroma .sd,
  .dark .content-frosted-wrapper .prose .chroma .sh,
  .dark .content-frosted-wrapper .prose .chroma .si,
  .dark .content-frosted-wrapper .prose .chroma .sx,
  .dark .content-frosted-wrapper .prose .chroma .sr,
  .dark .content-frosted-wrapper .prose .chroma .ss,
  .dark .content-frosted-wrapper .prose .chroma .sa,
  .dark .content-frosted-wrapper .prose .chroma .dl {
    color: #ce9178 !important;
  }

  /* 字符串转义 - 橙色 */
  .content-frosted-wrapper .prose .chroma .se {
    color: #e36209 !important;
    font-weight: 600 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .se {
    color: #d7ba7d !important;
    font-weight: 600 !important;
  }

  /* 数字 - 蓝色 */
  .content-frosted-wrapper .prose .chroma .m,
  .content-frosted-wrapper .prose .chroma .mb,
  .content-frosted-wrapper .prose .chroma .mf,
  .content-frosted-wrapper .prose .chroma .mh,
  .content-frosted-wrapper .prose .chroma .mi,
  .content-frosted-wrapper .prose .chroma .il,
  .content-frosted-wrapper .prose .chroma .mo {
    color: #005cc5 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .m,
  .dark .content-frosted-wrapper .prose .chroma .mb,
  .dark .content-frosted-wrapper .prose .chroma .mf,
  .dark .content-frosted-wrapper .prose .chroma .mh,
  .dark .content-frosted-wrapper .prose .chroma .mi,
  .dark .content-frosted-wrapper .prose .chroma .il,
  .dark .content-frosted-wrapper .prose .chroma .mo {
    color: #b5cea8 !important;
  }

  /* 注释 - 灰色斜体 */
  .content-frosted-wrapper .prose .chroma .c,
  .content-frosted-wrapper .prose .chroma .c1,
  .content-frosted-wrapper .prose .chroma .cm,
  .content-frosted-wrapper .prose .chroma .cp,
  .content-frosted-wrapper .prose .chroma .cpf,
  .content-frosted-wrapper .prose .chroma .cs {
    color: #6a737d !important;
    font-style: italic !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .c,
  .dark .content-frosted-wrapper .prose .chroma .c1,
  .dark .content-frosted-wrapper .prose .chroma .cm,
  .dark .content-frosted-wrapper .prose .chroma .cp,
  .dark .content-frosted-wrapper .prose .chroma .cpf,
  .dark .content-frosted-wrapper .prose .chroma .cs {
    color: #6a9955 !important;
    font-style: italic !important;
  }

  /* 函数名 - 黄色/绿色 */
  .content-frosted-wrapper .prose .chroma .nf,
  .content-frosted-wrapper .prose .chroma .fm {
    color: #6f42c1 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .nf,
  .dark .content-frosted-wrapper .prose .chroma .fm {
    color: #dcdcaa !important;
  }

  /* 类名 - 青色/绿色 */
  .content-frosted-wrapper .prose .chroma .nc {
    color: #6f42c1 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .nc {
    color: #4ec9b0 !important;
  }

  /* 变量名 - 浅蓝色 */
  .content-frosted-wrapper .prose .chroma .nv,
  .content-frosted-wrapper .prose .chroma .vi,
  .content-frosted-wrapper .prose .chroma .vm {
    color: #e36209 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .nv,
  .dark .content-frosted-wrapper .prose .chroma .vi,
  .dark .content-frosted-wrapper .prose .chroma .vm {
    color: #9cdcfe !important;
  }

  /* 内置函数/变量 - 浅蓝色 */
  .content-frosted-wrapper .prose .chroma .nb,
  .content-frosted-wrapper .prose .chroma .bp {
    color: #005cc5 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .nb,
  .dark .content-frosted-wrapper .prose .chroma .bp {
    color: #4fc3f7 !important;
  }

  /* 操作符 - 默认颜色 */
  .content-frosted-wrapper .prose .chroma .o,
  .content-frosted-wrapper .prose .chroma .ow {
    color: #d73a49 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .o,
  .dark .content-frosted-wrapper .prose .chroma .ow {
    color: #d4d4d4 !important;
  }

  /* 属性名 - 浅蓝色 */
  .content-frosted-wrapper .prose .chroma .na,
  .content-frosted-wrapper .prose .chroma .py {
    color: #005cc5 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .na,
  .dark .content-frosted-wrapper .prose .chroma .py {
    color: #4fc3f7 !important;
  }

  /* 标签名 - 蓝色（HTML标签） */
  .content-frosted-wrapper .prose .chroma .nt {
    color: #22863a !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .nt {
    color: #4fc3f7 !important;
  }

  /* 常量 - 亮蓝色 */
  .content-frosted-wrapper .prose .chroma .no {
    color: #005cc5 !important;
    font-weight: 600 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .no {
    color: #4fc3f7 !important;
    font-weight: 600 !important;
  }

  /* 类型名 - 青色 */
  .content-frosted-wrapper .prose .chroma .n,
  .content-frosted-wrapper .prose .chroma .nx {
    color: #24292e !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .n,
  .dark .content-frosted-wrapper .prose .chroma .nx {
    color: #d4d4d4 !important;
  }

  /* 其他名称 - 青色/绿色 */
  .content-frosted-wrapper .prose .chroma .nd,
  .content-frosted-wrapper .prose .chroma .ni,
  .content-frosted-wrapper .prose .chroma .nl,
  .content-frosted-wrapper .prose .chroma .ne,
  .content-frosted-wrapper .prose .chroma .vg {
    color: #6f42c1 !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .nd,
  .dark .content-frosted-wrapper .prose .chroma .ni,
  .dark .content-frosted-wrapper .prose .chroma .nl,
  .dark .content-frosted-wrapper .prose .chroma .ne,
  .dark .content-frosted-wrapper .prose .chroma .vg {
    color: #4ec9b0 !important;
  }

  /* 行号 - 灰色 */
  .content-frosted-wrapper .prose .chroma .lnt,
  .content-frosted-wrapper .prose .chroma .ln {
    color: #6a737d !important;
  }

  .dark .content-frosted-wrapper .prose .chroma .lnt,
  .dark .content-frosted-wrapper .prose .chroma .ln {
    color: #858585 !important;
  }

  /* 5. 引用块样式 - 明显的颜色区分 */
  .content-frosted-wrapper .prose blockquote {
    border-left: 4px solid #3b82f6 !important;
    background: rgba(59, 130, 246, 0.1) !important;
    padding: 1rem 1.5rem !important;
    margin: 1.5rem 0 !important;
    border-radius: 4px !important;
    color: #1e293b !important;
  }

  .dark .content-frosted-wrapper .prose blockquote {
    border-left-color: #60a5fa !important;
    background: rgba(96, 165, 250, 0.15) !important;
    color: #e2e8f0 !important;
  }

  .content-frosted-wrapper .prose blockquote p {
    color: inherit !important;
    margin: 0 !important;
  }

  /* 行内代码 - 明显的背景色 */
  .content-frosted-wrapper .prose code:not(pre code) {
    background: rgba(59, 130, 246, 0.15) !important;
    color: #1e40af !important;
    padding: 0.2em 0.4em !important;
    border-radius: 3px !important;
    font-size: 0.9em !important;
  }

  .dark .content-frosted-wrapper .prose code:not(pre code) {
    background: rgba(96, 165, 250, 0.2) !important;
    color: #93c5fd !important;
  }

  </style>
  
  <div class="content-frosted-wrapper">
    <article>
      {{/* Hero */}}
      {{ if .Params.showHero | default (site.Params.article.showHero | default false) }}
        {{ $heroStyle := .Params.heroStyle }}
        {{ if not $heroStyle }}{{ $heroStyle = site.Params.article.heroStyle }}{{ end }}
        {{ $heroStyle := print "hero/" $heroStyle ".html" }}
        {{ if templates.Exists ( printf "partials/%s" $heroStyle ) }}
          {{ partial $heroStyle . }}
        {{ else }}
          {{ partial "hero/basic.html" . }}
        {{ end }}
      {{ end }}

      {{/* Header */}}
      <header id="single_header" class="mt-5">
        {{ if .Params.showBreadcrumbs | default (site.Params.article.showBreadcrumbs | default false) }}
          {{ partial "breadcrumbs.html" . }}
        {{ end }}
        <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
          {{ .Title | emojify }}
        </h1>
        <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
          {{ partial "article-meta/basic.html" (dict "context" . "scope" "single") }}
        </div>
        {{ if not (.Params.showAuthorBottom | default (site.Params.article.showAuthorBottom | default false)) }}
          {{ template "SingleAuthor" . }}
        {{ end }}
      </header>

      {{/* Body */}}
      <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
        {{ $enableToc := site.Params.article.showTableOfContents | default false }}
        {{ $enableToc = .Params.showTableOfContents | default $enableToc }}
        {{ $showToc := and $enableToc (in .TableOfContents "<ul") }}
        {{ $topClass := cond (hasPrefix site.Params.header.layout "fixed") "lg:top-[140px]" "lg:top-10" }}
        {{ if $showToc }}
          <div class="order-first lg:ml-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs">
            <div class="toc ps-5 print:hidden lg:sticky {{ $topClass }}">
              {{ if $showToc }}
                {{ partial "toc.html" . }}
              {{ end }}
            </div>
          </div>
        {{ end }}

        <div class="min-w-0 min-h-0">
          {{ partial "series/series.html" . }}
          <div class="article-content mb-20">
            {{ .Content }}
            {{ $defaultReplyByEmail := site.Params.replyByEmail }}
            {{ $replyByEmail := default $defaultReplyByEmail .Params.replyByEmail }}
            {{ if $replyByEmail }}
              <strong class="block mt-8">
                <a
                  target="_blank"
                  class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
                  href="mailto:{{ site.Params.Author.email }}?subject={{ replace (printf "Reply to %s" .Title) "\"" "'" }}">
                  Reply by Email
                </a>
              </strong>
            {{ end }}
          </div>
          {{ if (.Params.showAuthorBottom | default (site.Params.article.showAuthorBottom | default false)) }}
            {{ template "SingleAuthor" . }}
          {{ end }}
          {{ partial "series/series-closed.html" . }}
          {{ partial "sharing-links.html" . }}
          {{ partial "related.html" . }}
        </div>

        {{ $translations := .AllTranslations }}
        {{ with .File }}
          {{ $path := .Path }}
          {{ range $translations }}
            {{ $lang := print "."  .Lang  ".md" }}
            {{ $path = replace $path $lang ".md" }}
          {{ end }}
          {{ $jsPage := resources.Get "js/page.js" }}
          {{ $jsPage = $jsPage | resources.Minify | resources.Fingerprint (site.Params.fingerprintAlgorithm | default "sha512") }}
          <script
            type="text/javascript"
            src="{{ $jsPage.RelPermalink }}"
            integrity="{{ $jsPage.Data.Integrity }}"
            data-oid="views_{{ $path }}"
            data-oid-likes="likes_{{ $path }}"></script>
        {{ end }}
      </section>

      {{/* Footer */}}
      <footer class="pt-8 print:hidden">
        {{ partial "article-pagination.html" . }}
        {{ if .Params.showComments | default (site.Params.article.showComments | default false) }}
          {{ if templates.Exists "partials/comments.html" }}
            <div class="pt-3">
              <hr class="border-dotted border-neutral-300 dark:border-neutral-600">
              <div class="pt-3">
                {{ partial "comments.html" . }}
              </div>
            </div>
          {{ else }}
            {{ warnf "[BLOWFISH] Comments are enabled for %s but no comments partial exists." .File.Path }}
          {{ end }}
        {{ end }}
      </footer>
    </article>
  </div>
{{ end }}

{{ define "SingleAuthor" }}
  {{ $authorsData := site.Data.authors }}
  {{ $taxonomies := site.Taxonomies.authors }}
  {{ $baseURL := site.BaseURL }}
  {{ $taxonomyLink := 0 }}
  {{ $showAuthor := 0 }}
  {{ $isAuthorBottom := (.Params.showAuthorBottom | default ( site.Params.article.showAuthorBottom | default false)) }}

  {{ if not (strings.HasSuffix $baseURL "/") }}
    {{ $baseURL = delimit (slice $baseURL "/") "" }}
  {{ end }}

  {{ if .Params.showAuthor | default (site.Params.article.showAuthor | default true) }}
    {{ $showAuthor = 1 }}
    {{ partial "author.html" . }}
  {{ end }}

  {{ range $author := .Page.Params.authors }}
    {{ $authorData := index $authorsData $author }}
    {{- if $authorData -}}
      {{ range $taxonomyname, $taxonomy := $taxonomies }}
        {{ if (eq $taxonomyname $author) }}
          {{ $taxonomyLink = delimit (slice $baseURL "authors/" $author "/") "" }}
        {{ end }}
      {{ end }}

      {{ $finalLink := $taxonomyLink }}
      {{ $currentLang := site.Language.Lang }}
      {{ if eq site.LanguagePrefix "" }}
        {{ $finalLink = printf "%sauthors/%s/" $baseURL $author }}
      {{ else }}
        {{ $finalLink = printf "%s%s/authors/%s/" $baseURL $currentLang $author }}
      {{ end }}
      {{ partial "author-extra.html" (dict "context" . "data" $authorData "link" $finalLink) }}
    {{- end -}}
  {{ end }}

  {{ if or $taxonomyLink $showAuthor }}
    <div class="{{ cond $isAuthorBottom "mb-10" "mb-5" }}"></div>
  {{ end }}
{{ end }}
